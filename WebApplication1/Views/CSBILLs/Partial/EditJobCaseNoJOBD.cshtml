@model WebApplication1.CSBILL



<div class="container form-check-inline" style="width:96vw">
    <div class="form-group col-md-3">
        @Html.LabelFor(model => model.JOBNO, htmlAttributes: new { @class = "control-label" })
        <div>
            @Html.EditorFor(model => model.JOBNO, new { htmlAttributes = new { @class = "form-control", @readonly = true } })
            @Html.ValidationMessageFor(model => model.JOBNO, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group col-md-2">
        @Html.LabelFor(model => model.CASENO, htmlAttributes: new { @class = "control-label" })
        <div>
            @Html.EditorFor(model => model.CASENO, new { htmlAttributes = new { @class = "form-control", @readonly = true } })
            @Html.ValidationMessageFor(model => model.CASENO, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group col-md-6">
        @Html.LabelFor(model => model.CASECODE, htmlAttributes: new { @class = "control-label" })
        <div>
            @Html.DropDownListFor(model => model.CASECODE,null, "No Selection", htmlAttributes: new { @class = "form-control" })
            @Html.ValidationMessageFor(model => model.CASECODE, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group col-md-5">
        @Html.LabelFor(model => model.ITEMTYPE, null, htmlAttributes: new { @class = "control-label" })
        <div>
            @Html.DropDownList("ITEMTYPE", null,"No Selection", htmlAttributes: new { @class = "form-control" })
            @Html.ValidationMessageFor(model => model.ITEMTYPE, "", new { @class = "text-danger" })
        </div>
    </div>
</div>
<div class="container form-check-inline" style="width:96vw">


    <div class="form-group col-md-5">
        @Html.LabelFor(model => model.ITEMDESC, htmlAttributes: new { @class = "control-label" })
        <div>
            @Html.EditorFor(model => model.ITEMDESC, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.ITEMDESC, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group col-md-6">
        @Html.LabelFor(model => model.ITEMSPEC, htmlAttributes: new { @class = "control-label" })
        <div>
            @Html.EditorFor(model => model.ITEMSPEC, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.ITEMSPEC, "", new { @class = "text-danger" })
        </div>
    </div>
    <div class="form-group col-md-2">
        @Html.LabelFor(model => model.TAXCODE, htmlAttributes: new { @class = "control-label" })
        <div>
            @Html.DropDownListFor(model => model.TAXCODE, null, "No Tax Selected", htmlAttributes: new { @class = "form-control" })
            @Html.ValidationMessageFor(model => model.TAXCODE, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group col-md-2">
        @Html.LabelFor(model => model.TAXRATE, htmlAttributes: new { @class = "control-label" })
        <div>
            @Html.EditorFor(model => model.TAXRATE, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.TAXRATE, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group col-md-1">
        <br />
        <button id="btnTax" name="btnTax" type="button" class="btn btn-primary">Update Tax</button>
    </div>
</div>

<div class="container form-check-inline" style="width:96vw">
    <div class="form-group col-md-4" style="text-align:right">
        @Html.LabelFor(model => model.ITEMAMT1, htmlAttributes: new { @class = "control-label" })
        <div class="text-right">
            @Html.EditorFor(model => model.ITEMAMT1, new { htmlAttributes = new { @class = "form-control text-right" } })
            @Html.ValidationMessageFor(model => model.ITEMAMT1, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group col-md-4" style="text-align:right">

        @Html.Label("Calc Own Amount Tax", htmlAttributes: new { @class = "control-label text-right" })
        <div class="text-right">
            @Html.Editor("ITEMCALC1", new { htmlAttributes = new { @Value = "0.00", @class = "form-control text-right", @readonly = true } })
        </div>
    </div>

    <div class="form-group col-md-4" style="text-align:right">
        @Html.LabelFor(model => model.TAXAMT1, htmlAttributes: new { @class = "control-label text-right" })
        <div class="text-right">
            @Html.EditorFor(model => model.TAXAMT1, new { htmlAttributes = new { @class = "form-control text-right" } })
            @Html.ValidationMessageFor(model => model.TAXAMT1, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group col-md-4" style="text-align:right">
        @Html.LabelFor(model => model.NETAMT1, htmlAttributes: new { @class = "control-label text-right" })
        <div class="text-right">
            @Html.EditorFor(model => model.NETAMT1, new { htmlAttributes = new { @class = "form-control text-right", @readonly = true } })
            @Html.ValidationMessageFor(model => model.NETAMT1, "", new { @class = "text-danger" })
        </div>
    </div>
</div>

<div class="container form-check-inline" style="width:96vw">
    <div class="form-group col-md-4" style="text-align:right">
        @Html.LabelFor(model => model.ITEMAMT2, htmlAttributes: new { @class = "control-label text-right" })
        <div class="text-right">
            @Html.EditorFor(model => model.ITEMAMT2, new { htmlAttributes = new { @class = "form-control text-right" } })
            @Html.ValidationMessageFor(model => model.ITEMAMT2, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group col-md-4" style="text-align:right">

        @Html.Label("Calc 3rd Party Tax", htmlAttributes: new { @class = "control-label text-right" })
        <div class="text-right">
            @Html.Editor("ITEMCALC2", new { htmlAttributes = new { @Value = "0.00", @class = "form-control text-right", @readonly = true } })
        </div>
    </div>
    <div class="form-group col-md-4" style="text-align:right">
        @Html.LabelFor(model => model.TAXAMT2, htmlAttributes: new { @class = "control-label text-right" })
        <div class="text-right">
            @Html.EditorFor(model => model.TAXAMT2, new { htmlAttributes = new { @class = "form-control text-right" } })
            @Html.ValidationMessageFor(model => model.TAXAMT2, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group col-md-4" style="text-align:right">
        @Html.LabelFor(model => model.NETAMT2, htmlAttributes: new { @class = "control-label text-right", @readonly = true })
        <div class="text-right">
            @Html.EditorFor(model => model.NETAMT2, new { htmlAttributes = new { @class = "form-control text-right", @readonly = true } })
            @Html.ValidationMessageFor(model => model.NETAMT2, "", new { @class = "text-danger" })
        </div>
    </div>
</div>

<div class="container form-check-inline" style="width:96vw">
    <div class="form-group  col-md-4" style="text-align:right">
        @Html.LabelFor(model => model.ITEMAMT, htmlAttributes: new { @class = "control-label text-right" })
        <div class="text-right">
            @Html.EditorFor(model => model.ITEMAMT, new { htmlAttributes = new { @class = "form-control  text-right", @readonly = true } })
            @Html.ValidationMessageFor(model => model.ITEMAMT, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group col-md-4" style="text-align:right">

        @Html.Label("Calc Net Tax", htmlAttributes: new { @class = "control-label text-right" })
        <div class="text-right">
            @Html.Editor("ITEMCALC", new { htmlAttributes = new { @Value = "0.00", @class = "form-control text-right", @readonly = true } })
        </div>
    </div>

    <div class="form-group  col-md-4" style="text-align:right">
        @Html.LabelFor(model => model.TAXAMT, htmlAttributes: new { @class = "control-label text-right" })
        <div class="text-right">
            @Html.EditorFor(model => model.TAXAMT, new { htmlAttributes = new { @class = "form-control text-right", @readonly = true } })
            @Html.ValidationMessageFor(model => model.TAXAMT, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group  col-md-4" style="text-align:right">
        @Html.LabelFor(model => model.NETAMT, htmlAttributes: new { @class = "control-label text-right" })
        <div>
            @Html.EditorFor(model => model.NETAMT, new { htmlAttributes = new { @class = "form-control text-right", @readonly = true } })
            @Html.ValidationMessageFor(model => model.NETAMT, "", new { @class = "text-danger" })
        </div>
    </div>
</div>

@Scripts.Render("~/bundles/jquery")
<script>
    $(document).ready(function () {
        $('#TAXRATE').change('#TAXRATE', CalcTax);
        $('#ITEMAMT1').change('#ITEMAMT1', AddItem);
        $('#ITEMAMT2').change('#ITEMAMT2', AddItem);
        $('#TAXAMT1').change('#TAXAMT1', AddItem);
        $('#TAXAMT2').change('#TAXAMT2', AddItem);
        $('#btnTax').click(UpdateTax);
        CalcTax('#TAXRATE');
        UpdateTotal();

        $('#CASECODE').change(function () {
            $("#ITEMDESC").val($("#CASECODE option:selected").text());
        })
    })

    $("#ITEMTYPE").change(function () {
        var itemtype = $("#ITEMTYPE option:selected").text();
        var useDate = $("#ENTDATE").val();
        $.post('@Url.Action("CheckRate", "CSITEMs")', { vdate: useDate, itemtype: itemtype },
  function (data, status) {
      if (status == "success") {
          var adata = data.split("|");
          var taxcode = adata[0];
          var taxrate = adata[1];
          $("#TAXRATE").val(taxrate);
          $("#TAXCODE").val(taxcode);
          CalcTax('#TAXRATE');
      } else {
          alert("Data: " + data + "\nStatus: " + status);
      }
  });
    }
)
</script>


